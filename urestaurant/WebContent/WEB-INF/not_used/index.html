<!-- 
File name: index.html
Author: Jeremy Chen
Date: 01/02/2015 (DD/MM/YYYY)
Public home page to welcome new/existing users.
 -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Urestaurant</title>
<meta name="description"
	content="The best event hosting app in Web Programming 2016">
<meta name="author" content="Web Project 2016">

<!-- Start Bootstrap CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/font-awesome.min.css" rel="stylesheet">
<link href="css/themes/darkly.css" rel="stylesheet">
<!-- End Bootstrap CSS -->

<!-- Start custom CSS -->
<link href="css/custom.css" rel="stylesheet">
<!-- End Custom CSS -->

<!-- HTML5 shiv and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

<!-- Start Inline CSS (overrides all of the above styles) -->
<style type="text/css">
.jumbotron, .page {
	padding-top: 140px;
	padding-bottom: 140px;
	margin-bottom: 0px;
}
</style>
<!-- End Inline CSS -->

</head>
<body style="padding-top: 50px;">
	<!-- Start Navigation Bar -->
	<nav id="topnavigation" class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#topnav" aria-expanded="false">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">Urestaurant</a>
			</div>
			<div id="topnav" class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="#"><i class="fa fa-cubes"></i>Events</a></li>
					<li class="active"><a href="#"><i class="fa fa-cubes"></i>Host
							an Event</a></li>
					<li class="dropdown"><a href="#" class="dropdown-toggle"
						data-toggle="dropdown" role="button" aria-haspopup="true"
						aria-expanded="false">Language <span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a href="#">English</a></li>
							<li><a href="#">fran√ßais</a></li>
						</ul></li>
				</ul>
				<form class="navbar-form navbar-left" role="search">
					<div class="form-group">
						<input type="text" class="form-control" placeholder="Search">
					</div>
					<button type="submit" class="btn btn-default">
						<i class="fa fa-search"></i>
					</button>
				</form>



				<ul class="nav navbar-nav navbar-right">
					<li><a href="#" id="lgn-btn" role="button"><i
							class="fa fa-user-plus"></i> Login</a></li>
					<li><a href="#sgn-modal" data-toggle="modal" id="sgn-btn"
						role="button"><i class="fa fa-user-plus"></i> Sign Up</a></li>
					
				</ul>
			</div>
		</div>
	</nav>
	<!-- End Navigation Bar -->



	<!-- Start Section -->
	<div id="headline" class="jumbotron">
		<!-- Main Container -->
		<div class="container">
			<div class="row">
				<div id="welcome-msg" class="col-md-6 col-md-offset-3 text-center">
					<h1>Urestaurant</h1>
					<p>Events you won't want to miss.</p>
				</div>
			</div>

			<div class="row">
				<div
					class="col-xs-8 col-xs-offset-2 col-sm-8 col-sm-offset-2 col-md-4 col-md-offset-4 col-lg-4 col-lg-offset-4 ">
					<!-- Login form -->
					<div
						class="panel panel-default lgn-pnl col-xs-12 col-sm-12 col-md-12 col-lg-12">
						<div class="panel-body">
							<h3 style="margin-left: 15px;">Already Signed Up?</h3>
							<form id="login-frm" action="/urestaurant/login" method="post">
								<div id="lgn-username" class="row sgn-cntrl">
									<div class="row">
										<div class="col-md-4">
											<label class="label label-default sgn-labl">Username</label>
										</div>
									</div>
									<div class="row">
										<div class="col-md-12">
											<input name="username" class="form-control" type="text"
												data-toggle="popover" data-trigger="focus" />
										</div>
									</div>
								</div>
								<div id="lgn-password" class="row sgn-cntrl">
									<div class="row">
										<div class="col-md-4">
											<label class="label label-default sgn-labl">Password</label>
										</div>
									</div>
									<div class="row">
										<div class="col-md-12">
											<input name="password" class="form-control" type="password"
												data-toggle="popover" data-trigger="focus" />
										</div>
									</div>
								</div>
								<div class="row sgn-cntrl"
									style="background-color: #303030; margin-top: 15px; float: right;">
									<button class="btn btn-info" type="submit"
										style="margin-right: 10px;">Sign-in</button>
									<button id="sgn-cancel" class="btn btn-danger" type="reset">Cancel</button>
								</div>
							</form>
						</div>
					</div>
					<!-- End login form -->
				</div>
				<!-- End column -->
			</div>
		</div>
	</div>
	<!-- End Section -->


	<!-- Start Section -->
	<div id="testimonials" class="jumbotron"
		style="background: transparent;">
		<div class="container">
			<div class="row">
				<div class="col-md-6">
					<div class="row">
						<div class="col-md-4 col-sm-4 col-xs-3">
							<p>&nbsp;</p>
							<p>
								<a href="http://uifaces.com/kolage" target="_blank"><img
									src="images/avatar01.jpg" alt="@soffes"
									class="img-circle img-responsive"></a>
							</p>
						</div>
						<div class="col-md-8 col-sm-3 col-xs-9">
							<blockquote>
								<h3>&quot;Simply Wonderful.&quot;</h3>
								<p>Urestaurant an absolute joy to use, and it has already
									helped me find great food!</p>
								<footer>
									Some guy, <cite>Founder of Something</cite>
								</footer>
							</blockquote>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="row">
						<div class="col-md-4 col-sm-4 col-xs-3">
							<p>&nbsp;</p>
							<p>
								<a href="http://uifaces.com/madysondesigns" target="_blank"><img
									src="images/avatar02.jpg" alt="@soffes"
									class="img-circle img-responsive"></a>
							</p>
						</div>
						<div class="col-md-8 col-sm-3 col-xs-9">
							<blockquote>
								<h3>&quot;Well Worth The Price!&quot;</h3>
								<p>I had a blast at this event, and I can't wait for the
									next one!</p>
								<footer>
									Connie Burgher, <cite>PR Executive</cite>
								</footer>
							</blockquote>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- End Section -->

	<!-- Start Carousel -->
	<div id="carousel" class="carousel slide" data-ride="carousel">
		<div class="carousel-inner" role="listbox">
			<div class="item active">
				<img src="images/carousel01.jpg" alt="First slide">
			</div>
			<div class="item">
				<img src="images/carousel02.jpg" alt="Second slide">
			</div>
		</div>
	</div>
	<!-- End Carousel -->

	<!-- Start Section -->
	<div id="tabs" class="jumbotron">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<!-- Nav tabs -->
					<ul class="nav nav-pills">
						<li role="presentation"><a href="#tab1" data-toggle="tab">Browse
								Events</a></li>
						<li role="presentation"><a href="#tab2" data-toggle="tab">Geolocation</a></li>
					</ul>
					<p></p>
					<!-- Tab panes -->
					<div class="tab-content">
						<div role="tabpanel" class="tab-pane active" id="tab1">
							<div class="table-responsive">
								<table class="table table-bordered table-striped">
									<tr>
										<th>Event</th>
										<th>Start</th>
										<th>End</th>
										<th>Private</th>
										<th>Availability</th>
									</tr>
									<tr>
										<td>Urestaurant</td>
										<td>15 June 2016 6:00pm</td>
										<td>15 June 2016 7:00pm</td>
										<td>Yes</td>
										<td><span class="label label-danger">FULL</span></td>
									</tr>
									<tr>
										<td>BYO Ribs</td>
										<td>1 August 2016 7:00pm</td>
										<td>1 August 2016 11:00pm</td>
										<td>Yes</td>
										<td><span class="label label-warning">LIMITED</span></td>
									</tr>
									<tr>
										<td>Bob's Private Steakhouse</td>
										<td>1 September 2016 6:00pm</td>
										<td>1 December 2016 12:00pm</td>
										<td>Yes</td>
										<td><span class="label label-success">AVAILABLE</span></td>
									</tr>
									<tr>
										<td>Walk-in Pub</td>
										<td>13 December 2016</td>
										<td>15 December 2016</td>
										<td>No</td>
										<td><span class="label label-default">NOT
												AVAILABLE</span></td>
									</tr>
								</table>
							</div>
						</div>
						<!-- end tab panel -->
						<div role="tabpanel" class="tab-pane" id="tab2">
							<div class="embed-responsive embed-responsive-16by9">
								<iframe
									src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d6345.022861467272!2d-122.03233!3d37.3303991!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x808fb5b6c386ca17%3A0x76c265bfa5a8038a!2sApple!5e0!3m2!1sen!2smy!4v1436187953486"
									width="800" height="600" frameborder="0" style="border: 0"
									allowfullscreen class="embed-responsive-item"></iframe>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- End Section -->

	<!-- Start Bottom Nav -->
	<div id="bottomnav" class="jumbotron"
		style="padding-top: 40px; padding-bottom: 40px;">
		<div class="container">
			<div class="row">
				<div class="col-md-12 text-center">
					Copyright 2016 Urestaurant.com. All Rights Reserved. | <a href="#">Terms</a>
					| <a href="#">Privacy</a>
				</div>
			</div>
		</div>
	</div>
	<!-- End Bottom Nav -->


	<!-- Sign Up Modal -->
	<div id="sgn-modal" class="modal fade" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close glyphicon glyphicon-remove"
						data-dismiss="modal"></button>
					<h3 class="modal-title text-center">Welcome!</h3>
				</div>
				<div class="modal-body">
					<!-- Sign in form -->
					<form action="/urestaurant/signup" id="sign-in-frm" method="post">
						<div id="sgn-firstname" class="row sgn-cntrl">
							<div class="row">
								<div class="col-md-4">
									<label class="label label-default sgn-labl">First Name</label>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<input type="text" name="firstname" class="form-control"
										data-toggle="popover" data-trigger="focus" />
								</div>
							</div>
						</div>
						<div id="sgn-lastname" class="row sgn-cntrl">
							<div class="row">
								<div class="col-md-4">
									<label class="label label-default sgn-labl">Last Name</label>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<input type="text" name="lastname" class="form-control"
										data-toggle="popover" data-trigger="focus" />
								</div>
							</div>
						</div>
						<div id="sgn-email" class="row sgn-cntrl">
							<div class="row">
								<div class="col-md-4">
									<label class="label label-default sgn-labl">Email</label>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<input name="email" type="text" class="form-control"
										data-toggle="popover" data-trigger="focus" />
								</div>
							</div>
						</div>
						<div id="sgn-username" class="row sgn-cntrl">
							<div class="row">
								<div class="col-md-4">
									<label class="label label-default sgn-labl">Username</label>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<input name="username" class="form-control" type="text"
										data-toggle="popover" data-trigger="focus" />
								</div>
							</div>
						</div>
						<div id="sgn-password" class="row sgn-cntrl">
							<div class="row">
								<div class="col-md-4">
									<label class="label label-default sgn-labl">Password</label>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<input name="password" class="form-control" type="password"
										data-toggle="popover" data-trigger="focus" />
								</div>
							</div>
						</div>
						<div id="sgn-confirm" class="row sgn-cntrl">
							<div class="row">
								<div class="col-md-4">
									<label class="label label-default sgn-labl">Confirm
										Password</label>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<input name="confirm" class="form-control" type="password"
										data-toggle="popover" data-trigger="focus" />
								</div>
							</div>
						</div>
						<div class="modal-footer sgn-cntrl">
							<button class="btn btn-info" type="submit"
								style="margin-right: 10px;">Sign-in</button>
							<button class="btn btn-danger" type="reset" data-dismiss="modal">
								Cancel</button>
						</div>
					</form>
				</div>
			</div>
			<!-- End sign in form -->
		</div>
	</div>
	<!-- End Sign Up Modal -->

	<!-- Start Scripts -->
	<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> -->
	<script src="js/jquery-1.12.0.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/sidebar_menu.js"></script>
	<script>
		/*
		 * File name: index.js
		 * Author: Christopher Elliott and Jeremy Chen
		 * Date: 01/02/2015 (DD/MM/YYYY)
		 * Public home page to welcome new/existing users.
		 */
		$(function() {
			$("#sgn-modal").modal({
				show : false,
				backdrop : false
			});

			$("#lgn-btn").on("click", function() {
				$(".lgn-pnl").removeClass("hide");
			});

			$("#sgn-btn").on("click", function() {
				//$("#welcome-msg").animate({right:'1350px'}, 1000);
				//$("#welcome-msg").fadeTo("slow", 0.01);
				$(".sgn-pnl").removeClass("hide").fadeIn("1000").animate({
					bottom : '250px'
				}, 700);
				//$(".sgn-pnl").removeClass("hide").fadeIn("1000");  			
			});

			$("#sgn-cancel").on("click", function() {
				$("input.required").popover("disable");
				$(".required").removeClass("required");
				$(".sgn-pnl").addClass("hide");
			});
			/*******************************************************************************
			 * Login form ajax request
			 *******************************************************************************/
			$("#login-frm")
					.submit(
							function(event) {
								event.preventDefault();
								$("input.required").popover("destroy");
								$(".required").removeClass("required");
								$
										.ajax({
											method : "post",
											dataType : "json",
											url : "/urestaurant/login",
											data : $("#login-frm").serialize(),
										})
										.done(
												function(data) {
													console.log(data);
													var datacontent = "";
													if (data["isvalid"])
														window.location.href = "/urestaurant/main.html";
													else if (data["password"] == "notvalid") {
														datacontent += "<p>Password does not match.</p>";
														$("#lgn-password input")
																.attr(
																		"data-content",
																		datacontent);
														$("#lgn-password input")
																.addClass(
																		"required");
														$("input.required")
																.popover(
																		{
																			"html" : true
																		});
														$("input.required")
																.first()
																.trigger(
																		"focus");
													} else {
														datacontent += "<p>User does not exist.</p>";
														$("#lgn-username input")
																.attr(
																		"data-content",
																		datacontent);
														$("#lgn-username input")
																.addClass(
																		"required");
														$("input.required")
																.popover(
																		{
																			"html" : true
																		});
														$("input.required")
																.first()
																.trigger(
																		"focus");
													}
												})
										.error(
												function(data) {
													console.log(data);
													alert("Oops! Sorry we cannot process the request at this time.");
												});
							});
			/*******************************************************************************
			 * Sign up form ajax request
			 *******************************************************************************/
			$("#sign-in-frm")
					.submit(
							function(event) {
								event.preventDefault();
								$("input.required").popover("destroy");
								$(".required").removeClass("required");
								$
										.ajax(
												{
													method : "post",
													dataType : "json",
													url : "/urestaurant/signup",
													data : $("#sign-in-frm")
															.serialize(),
												})
										.done(
												function(data) {
													console.log(data);
													var isvalid = data["isvalid"];
													for ( var key in data["user"]) {
														var datacontent = "";
														switch (key) {
														case "email":
															if (!data["user"][key].isvalid
																	|| !data["user"][key].isunique) {
																$(
																		"#sgn-"
																				+ key
																				+ " input")
																		.addClass(
																				"required");
																if (!data["user"][key].isvalid)
																	datacontent += "<p>Please enter a valid email address.</p>";
																if (!data["user"][key].isunique)
																	datacontent += "<p>Email already exists.</p>";
																$(
																		"#sgn-"
																				+ key
																				+ " input")
																		.attr(
																				"data-content",
																				datacontent);
															}
															break;
														case "username":
															if (!data["user"][key].isvalid
																	|| !data["user"][key].isunique) {
																$(
																		"#sgn-"
																				+ key
																				+ " input")
																		.addClass(
																				"required");
																if (!data["user"][key].isvalid)
																	datacontent += "<p>Username must be a combination of letters, digits and/or punctuation marks.</p>";
																if (!data["user"][key].isunique)
																	datacontent += "<p>Username already exists.</p>";
																$(
																		"#sgn-"
																				+ key
																				+ " input")
																		.attr(
																				"data-content",
																				datacontent);
															}
															break;
														case "firstname":
														case "lastname":
														case "confirm":
															if (!data["user"][key].isvalid) {
																$(
																		"#sgn-"
																				+ key
																				+ " input")
																		.addClass(
																				"required");
																$(
																		"#sgn-"
																				+ key
																				+ " input")
																		.attr(
																				"data-content",
																				key == "confirm" ? "<p>Please re-enter your password.</p>"
																						: "<p>What's your name?</p>");
															}
															break;
														case "password":
															if (!data["user"][key].isvalid
																	|| !data["user"][key].isconfirmed) {
																$(
																		"#sgn-"
																				+ key
																				+ " input")
																		.addClass(
																				"required");
																if (!data["user"][key].isvalid)
																	datacontent += "<p>Enter a combination of at least six number, letters, and punctuation marks (like ! and &).</p>";
																if (!data["user"][key].isconfirmed)
																	$(
																			"#sgn-confirm input")
																			.addClass(
																					"required")
																			.attr(
																					"data-content",
																					"<p>Passwords do not match. Please try again.</p>");
																$(
																		"#sgn-"
																				+ key
																				+ " input")
																		.attr(
																				"data-content",
																				datacontent);
															}
															break;
														}
													}
													if (!isvalid) {
														$("input.required")
																.popover(
																		{
																			"html" : true
																		});
														$("input.required")
																.first()
																.trigger(
																		"focus");
													} else {
														console.log(isvalid);
														window.location.href = "/urestaurant/main.html";
													}
												})
										.fail(
												function(data) {
													console.log(data);
													alert("Oops! Sorry we cannot process the request at this time.");
												});
							});
		});
	</script>
	<!-- End Scripts -->
</body>
</html>
